"use strict";(self.webpackChunkwhg_training_resources=self.webpackChunkwhg_training_resources||[]).push([[8343],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(a),g=i,h=d["".concat(s,".").concat(g)]||d[g]||u[g]||r;return a?n.createElement(h,o(o({ref:t},c),{},{components:a})):n.createElement(h,o({ref:t},c))}));function h(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=g;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:i,o[1]=l;for(var p=2;p<r;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"},6177:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var n=a(7462),i=(a(7294),a(3905));const r={sidebar_position:10},o="Labelling points",l={unversionedId:"data_visualisation/data_visualisation_with_ggplot2/labelling",id:"data_visualisation/data_visualisation_with_ggplot2/labelling",title:"Labelling points",description:"If you look back at [this plot of GDP versus life",source:"@site/docs/data_visualisation/data_visualisation_with_ggplot2/008_labelling.md",sourceDirName:"data_visualisation/data_visualisation_with_ggplot2",slug:"/data_visualisation/data_visualisation_with_ggplot2/labelling",permalink:"/whg-training-resources/data_visualisation/data_visualisation_with_ggplot2/labelling",draft:!1,editUrl:"https://github.com/whg-training/whg-training-resources/edit/main/docs/data_visualisation/data_visualisation_with_ggplot2/008_labelling.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10},sidebar:"sidebar3",previous:{title:"Is gdp related to life expectancy?",permalink:"/whg-training-resources/data_visualisation/data_visualisation_with_ggplot2/gdp_life_expectancy"},next:{title:"Saving your figures",permalink:"/whg-training-resources/data_visualisation/data_visualisation_with_ggplot2/saving"}},s={},p=[],c={toc:p},d="wrapper";function u(e){let{components:t,...r}=e;return(0,i.kt)(d,(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"labelling-points"},"Labelling points"),(0,i.kt)("p",null,"If you look back at ",(0,i.kt)("a",{parentName:"p",href:"/whg-training-resources/data_visualisation/data_visualisation_with_ggplot2/gdp_life_expectancy#is-gdp-related-to-life-expectancy"},"this plot of GDP versus life\nexpectancy"),", you'll see that some countries seem to buck\nthe overall trend.  It would be useful to label them so we can see what they are."),(0,i.kt)("p",null,"Let's try that now. We'll use some thresholds based on the above plot to pick countries for labelling:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-R"},"dat_label <- d07[\n  (d07$gdpPercap > 3000 & d07$lifeExp < 50)\n  | (d07$gdpPercap < 1000 & d07$lifeExp > 55),\n]\n")),(0,i.kt)("p",null,"This is countries with high per-capita gdp but low life expectancy, or vice versa - if you look at\nthis dataframe you'll see there are 10 of them. Let's add them to our plot:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"p2_3c <- p2_3b +\n# for the label layer, let's jsut use the subsetted data.\n# Setting position nudge moves the labels away from the points\ngeom_text(\n  data = dat_label,\n  aes(label = country),\n  position = position_nudge(x = -0.1, y = -1),\n  show.legend = F\n)\np2_3c\n")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"img",src:a(511).Z,width:"500",height:"300"})),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Despite the 'nudge', some of the labels are still on top of each other. One thing to try is the\n",(0,i.kt)("inlineCode",{parentName:"p"},"geom_text_repel()")," geom which is provided by the ",(0,i.kt)("inlineCode",{parentName:"p"},"ggrepel")," package instead.  Install it like this:"),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-R"},"install.packages( 'ggrepel' )\n")),(0,i.kt)("p",{parentName:"div"},"And now you can write:"),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre"},"p2_3b +\n# for the label layer, let's jsut use the subsetted data.\n# Setting position nudge moves the labels away from the points\ngeom_text_repel(\n  data = dat_label,\n  aes(label = country),\n  show.legend = F\n)\n")),(0,i.kt)("p",{parentName:"div"},(0,i.kt)("img",{alt:"img",src:a(6762).Z,width:"500",height:"300"})),(0,i.kt)("p",{parentName:"div"},(0,i.kt)("inlineCode",{parentName:"p"},"ggrepel")," has moved the labels off each other. (Still, it's still not totally obvious which points\ngo with with label. In general you can spend a lot of time getting labels like this in the right\nplaces - we'll leave it there for now.)"))))}u.isMDXComponent=!0},511:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/scatterplot_labels_1-65362b1d13722a860348c3225f0ac461.png"},6762:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/scatterplot_labels_2-8794e24d4468c6102ef7db22a24674a4.png"}}]);